language: python

build_image: shippableimages/ubuntu1204_python:0.0.3

#build_image: vauxoo/odoo-80-image-shippable-auto
#testreset_minion_beta
env:
  - secure: ZyHkOByzMmq1C6aI4/fBTB0vUXxQgP7s+n/n+moiNqr1X9EPPWocWMyK69OmWn5e/buOpdW0g4140844k8LbTavtFPgk5VoTi8I7BpXKbUrI/vQ4boIU/Gw3AA4nkSQ3Igwqtc7RdvHASsTvIsdedXTDde6ODXE8IMz3gzg36zU+lkB08/nqfcaZpu/x9G0hCx8gUiC77UEh9vq8yBcnglGECHTlADbhwW9ywlFelrlNNLg7gX6mZBQ4bGVNclud+WsDeg0F9iilkAVHJ3n/eXcl6x9uUKRFf/3DvrklB+JiQ72sOJxpA+14zk2w1hZq5FDHG+iugPinC3Hn/s95PA==


python:
  - 2.7
  - 3.3
  - 3.4
  
before_install:
  # We're going to set up a virtualenv and activate the python version we want to use
  - mkdir -p $HOME/sample_ve/
  - virtualenv -p /usr/bin/python$PYTHON_VERSION $HOME/sample_ve/
  - source $HOME/sample_ve/bin/activate
  
install:
  - pip install -r requirements.txt

# Make folders for the reports
before_script:
  - cd $SHIPPABLE_REPO_DIR && mkdir -p shippable/testresults
  - cd $SHIPPABLE_REPO_DIR && mkdir -p shippable/codecoverage

script:
  - echo $PWD
  - echo $test
  - cd $SHIPPABLE_REPO_DIR && nosetests test.py --with-xunit --xunit-file=shippable/testresults/nosetests.xml
  - cd $SHIPPABLE_REPO_DIR && which python && coverage run --branch test.py
  - cd $SHIPPABLE_REPO_DIR && which python && coverage xml -o shippable/codecoverage/coverage.xml test.py


commit_container: vidyar/python_1204_sample


#images:
 # image:
  #  build:
   #  type: docker
    # name: shippableimages/ubuntu1204_python
    # tag: latest
    #    code_path: /home/vidyar/src

